<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
							"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.onteacher.dao.ArticleDAO">





	<select id="selectAllArticlesList" resultType="article">
		<![CDATA[
		  select id,title,created_at,hits,user_id
		 	 from(select row_number() over (order by id desc) num, a.*
         	 from article a order by id desc)
          where num between #{s_row} and #{e_row}

		]]>
	</select>

	<select id="selectMaxArticleNO" resultType="int"> 
	<![CDATA[
		select max(id) from article
	]]>
	</select>




	<insert id="insertArticle" parameterType="article">

	 <![CDATA[
		 INSERT INTO article(id,title,content,filename,created_at,hits,user_id)
         VALUES (#{id}, #{title}, #{content}, #{filename}, sysdate, 0, #{user_id} )
		]]>
	</insert>


	<select id="selectArticle" resultType="article"
		parameterType="int">
		<![CDATA[
		SELECT * from article
        where id = #{id}	
		]]>
	</select>


	<update id="updateArticle" parameterType="article">
		<![CDATA[
		update article
		set title=#{title}
          , content=#{content}
          , filename=#{filename}
		where id=#{id}
		]]>
	</update>


	<delete id="deleteArticle" parameterType="int">
		<![CDATA[
		delete * from article
		where id=#{id}
		]]>
	</delete>

	<select id="selectArticleCount" resultType="int">
		<![CDATA[
		select count(*)
		from article	
		]]>
	</select>




</mapper>